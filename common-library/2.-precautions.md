# 2. Precautions

The functions introduced here are roughly divided into functions that generate forms and functions that operate databases. The functions are named according to the following rules.

### 1. Function name rules

#### 1.1. Form generation function

Function names for form generation follow the rules below, with some exceptions.

> ```text
> xnpGet <TYPE> <METHOD> Block (argument)
> ```

* &lt;TYPE&gt;
  * BasicInformation: Item basic information
  * Index: Index
  * Preview: Attached image
  * Attachment: Attachment
  * TextFile: Text \(long text input\)
  * Rights: License
* &lt;METHOD&gt;
  * Detail: Called when the item detail display screen is generated.
  * Confirm: Called when creating the item content confirmation screen.
  * Register: Called when creating an item registration screen.
  * Edit: Called when creating an item edit screen.
  * PrinterFriendly: Called when creating a print screen. \(Since the internal processing is almost the same as Detail, the explanation of each function is omitted.\)

As you can see from the top, for example, the function to display the index on the item content confirmation screen is xnpGetIndexDetailBlock.

#### 1.2. Database manipulation functions

Function names that perform operations such as registering, editing, and deleting items follow the following rules, with some exceptions.

> ```text
> xnp <METHOD> <TYPE> (argument)
> ```

* &lt;TYPE&gt;
  * \(Since it is the same as the form generation function, it is omitted\)
* &lt;METHOD&gt;
  * Insert: Registers information in the database.
  * Update: Overwrites the information in the database.
  * Delete: Deletes the information from the database.

\* In some cases, the Update function also serves as Insert. \(Index, Preview, etc.\)

\* Some of them execute Delete at the same time as deleting Basic Information. \(Preview, Attatchment, etc.\)

### 2. Notes on form generation function

* The generated text alone does not work as a form.

  Note that the form generated by the function does not contain the &lt;form&gt; tag. Generates only HTML that can be used inside the &lt;form&gt; tag. Therefore, the generated result alone is incomplete as a form. Please define and use the &lt;form&gt; tag on the side that called the function.

* Some forms require JavaScript definition.

  In some cases, the form generated by the function and the definition of the &lt;form&gt; tag do not work. Whether or not JavaScript definition is required depends on the function. If you need a definition, JavaScript is included in the function description. Define the JavaScript in HTML along with the definition of the &lt;form&gt; tag.

* The generated form is output as an associative array.

  The function returns an associative array. The structure of the associative array is as follows.

  * When &lt;TYPE&gt; is Basic Information

    > ```text
    > array (
    >     'Field name' => array (
    >         'name' =>'Display field name',
    >         'value' =>'Display field value'
    >         'within'=>' The part that can be written to the DB of the field value' / * Exists only in the case of Confirm * /
    >         'without' =>'The part of the field value that cannot be written to the DB' / * Exists only in the case of Confirm * /
    >     ),
    >     (Repeat)â€¦
    >     'hidden' =>'Display hidden value' / * Exists only for Detail * /
    > )
    > ```

  * When &lt;TYPE&gt; is other than Basic Information

    > ```text
    > array (
    >         'name' =>'Display field name',
    >         'value' =>'Display field value'
    >         'within'=>' The part that can be written to the DB of the field value' / * Exists only in the case of Confirm * /
    >         'without' =>'The part of the field value that cannot be written to the DB' / * Exists only in the case of Confirm * /
    >         'hidden' =>'Display hidden value' / * Exists only for Detail * /
    > )
    > ```

  Basic Information registration, editing, confirmation, and detailed display forms are generated separately for each field such as title and comment. Please use it in the form of a form by combining only the fields required by the caller of the function.

  This is a framework for item type creators to select only the fields required for item types and create registration, editing, and browsing screens. This framework also allows item types that only have a title and comment on the registration screen.

  The field name contains a character string for internal processing to identify the field such as'titile'and'keywords'.

  The display field name is the field name to be output on the screen. The display field value is a specific value given by the database or variable. In the case of registration or editing, it may be the HTML of the form.

  There is a special key'hidden'only if &lt;METHOD&gt; is Detail. In this case, the invisible input tag for sending the same data as the registration screen / edit screen is set as the display hidden value. Although not described in the following chapters, this key exists for all xnpGet ~ DetailBlock.

  There is a special key'within''without' only if &lt;METHOD&gt; is Confirm. In this case,'within' is set to the part that can be written to the DB, and'without'is set to the part that cannot be written to the DB \(depending on the column size of the DB\). Although not described in the following chapters, this key exists if value is a string type.

