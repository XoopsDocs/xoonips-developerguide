# 5. Preview

It is used when you want to attach an image to an item. Images can be deleted or added for editing and registration. In the detailed display, you can access the full-scale image by clicking the thumbnail.

### 1. array xnpGetPreviewDetailBlock\( int item\_id \)

Create a Preview form to be displayed on the item details screen.

#### 1.1. Internally referenced $ \_POST variable

None

#### 1.2. Screen

> ![](https://xoonips.osdn.jp/manuals/commonlib-340/images/xnpGetPreviewDetailBlock.gif)

#### 1.3. Send data

None

### 2. array xnpGetPreviewEditBlock\( int item\_id \)

Generate the Preview column to be displayed on the item edit screen.

Click the Update button to upload the image file to the server and create a thumbnail image.

#### 2.1. Internally referenced $ \_POST variable

* $\_POST\['mode'\]
* $\_POST\['fileID'\]
* $\_POST\['previewFileID'\]
* $\_POST\['previewCaption'\]
* $\_FILES\['preview'\]

#### 2.2. Screen

> ![](https://xoonips.osdn.jp/manuals/commonlib-340/images/xnpGetPreviewEditBlock.gif)

#### 2.3. Transmission data

* Upload button → Send the following to the current screen.
  * $\_POST\['mode'\] = 'Upload'
  * $ \_POST \['previewFileID'\] // \(comma separated file\_id\)
  * $\_FILES\['preview'\]
  * $\_POST\['previewCaption'\]
* Delete button → Send the following to the current screen.
  * $\_POST\['mode'\] = 'Delete'
  * $ \_POST \['previewFileID'\] // \(comma separated file\_id\)
  * $\_POST\['fileID'\]
* Submit button → Submit the following to the confirmation screen.
  * $\_POST\['mode'\]
  * $ \_POST \['previewFileID'\] // \(comma separated file\_id\)

\* Please define the following JavaScript together with the form generated by this function.

> ```text
> <script type="text/javascript">
> <!--
> function xnpSubmitFileUpload( form, name ){
> 	form.mode.value = 'Upload';
> 	eval( 'var fileobj = form.' + name + ';' );
> 	if ( fileobj.value == null || fileobj.value == "" ){
> 		window.alert( 'error: no file specified.' );
> 		return false;
> 	}
> 	getCheckedIndexes( form );
> 	saveScrollPosition ();
> 	form.action = '';
> 	form.submit();
> }
> function xnpSubmitFileDelete( form, name, fileID ){
> 	form.mode.value = 'Delete';
> 	form.fileID.value = fileID;
> 	getCheckedIndexes( form );
> 	saveScrollPosition ();
> 	form.action = '';
> 	form.submit();
> }
> //-->
> </script>
> ```

\* The following tags are required in the form.

> ```text
> <input type='hidden' name='mode' value=''>
> <input type='hidden' name='fileID' value=''>
> ```

\* The following method and enctype must be specified in the form.

> ```text
> <form method="POST"  enctype="multipart/form-data" …..  >
> ```

### 3. array xnpGetPreviewConfirmBlock\( int item\_id \)

Create a Preview form to be displayed on the registration confirmation screen and edit confirmation screen.

#### 3.1. Internally referenced $ \_POST variable

* $\_POST\['previewFileID'\]

#### 3.2. Screen

> ![](https://xoonips.osdn.jp/manuals/commonlib-340/images/xnpGetPreviewConfirmBlock.gif)

#### 3.3. Transmission data

* $\_POST\['previewFileID'\]

### 4. array xnpGetPreviewRegisterBlock\(\)

→ [Section 2. "array xnpGetPreviewEditBlock \(int item\_id\)"](https://xoonips.osdn.jp/manuals/commonlib-340/preview.html#func-xnpGetPreviewEditBlock) the same as the

### 5. xnpInsertPreview: \(None\)

Use [Section 6. "bool xnpUpdatePreview \(int item\_id\)"](https://xoonips.osdn.jp/manuals/commonlib-340/preview.html#func-xnpUpdatePreview) instead .

### 6. bool xnpUpdatePreview\( int item\_id \)

Add the newly added image to the item. Deletes the deleted image from the item.

#### 6.1. Internally referenced $ \_POST variable

* $\_POST\['previewFileID'\]

### 7. xnpDeletePreview: \(none\)

[Section 9. "bool xnpDeleteBasicInformation \(int item\_id\)"](https://xoonips.osdn.jp/manuals/commonlib-340/basicinfo.html#func-xnpDeleteBasicInformation) deletes the Perview, so this function does not exist.

